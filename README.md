# 地牢英雄：终端历险

一款基于终端的Roguelike文字冒险游戏。

## 游戏特色

- **ASCII艺术呈现** - 完全使用字符展现游戏世界
- **程序生成地牢** - 每次游戏都有独特的地牢布局
- **回合制策略** - 谨慎规划移动、攻击和使用物品
- **角色成长** - 击败敌人获得经验，提升属性
- **永久死亡** - 角色死亡后游戏结束，每次都是全新体验
- **响应式布局** - 自动适应终端窗口大小

## 系统要求

- Python 3.6+
- Windows 10+ （终端ANSI颜色支持）
- 80x25或更大的终端窗口

## 安装

1. 克隆或下载项目：
```bash
git clone <repository-url>
cd 地牢英雄
```

2. 无需额外依赖，游戏使用Python标准库开发

## 运行游戏

```bash
python game.py
```

## 游戏操作

### 移动
- `WASD` 或方向键 - 上下左右移动
- `HJKL` - Vi风格移动
- `Q/E/Z/C` - 对角线移动

### 战斗
- 向敌人方向移动 - 自动攻击

### 其他操作
- `.` 或 `5` - 等待/跳过回合
- `>` 或 `<` - 上下楼梯
- `i` - 打开物品栏
  - 数字键 `1-9` - 选择物品
  - `u` - 使用选中物品
  - `d` - 丢弃选中物品
- `?` - 显示帮助
- `q` 或 `ESC` - 退出游戏

## 游戏界面

### 符号说明
| 符号 | 说明 |
|------|------|
| `@` | 玩家 |
| `#` | 墙壁 |
| `.` | 地板 |
| `>` | 下楼梯 |
| `<` | 上楼梯 |
| `!` | 生命药水 |
| `?` | 卷轴 |
| `$` | 金币 |
| `/` | 武器 |
| `[` | 盔甲 |
| `g` | 地精 |
| `o` | 兽人 |
| `s` | 史莱姆 |
| `D` | 龙(Boss) |

### 界面布局
- **地图区域** - 显示当前楼层、玩家、敌人、物品
- **状态栏** - 显示玩家等级、HP、攻击力、防御力、经验、金币、当前楼层
- **消息日志** - 显示游戏事件（战斗、拾取等）

## 游戏规则

### 胜利条件
到达并进入第5层的楼梯（击败Boss）

### 失败条件
玩家HP降至0

### 战斗系统
- 伤害计算：`伤害 = max(1, 攻击力 - 防御力)`
- 击败敌人获得经验值
- 经验值足够时自动升级

### 物品系统
- **消耗品**：生命药水（恢复HP）、火球术卷轴（范围伤害）、传送卷轴（随机传送）
- **装备**：武器（增加攻击力）、盔甲（增加防御力）- 拾取即生效
- **金币**：收集计分

## 项目结构

```
地牢英雄/
├── config/
│   └── game_config.json    # 游戏配置文件
├── core/
│   ├── __init__.py
│   ├── config.py           # 配置管理
│   ├── entity.py           # 实体类（玩家、敌人）
│   ├── item.py             # 物品类
│   └── position.py         # 位置坐标类
├── systems/
│   ├── __init__.py
│   ├── combat_system.py    # 战斗系统
│   ├── dungeon_generator.py # 地牢生成
│   ├── fov_system.py       # 视野系统
│   └── input_handler.py    # 输入处理
├── renderer/
│   ├── __init__.py
│   ├── color_manager.py    # 颜色管理
│   └── terminal_renderer.py # 终端渲染器（含响应式布局）
├── tests/
│   ├── __init__.py
│   ├── test_combat.py      # 战斗系统测试
│   ├── test_dungeon.py     # 地牢生成测试
│   └── test_entity.py      # 实体测试
├── game.py                 # 游戏主入口
├── requirements.txt        # 依赖列表
├── .gitignore             # Git忽略文件
└── README.md              # 本文件
```

## 运行测试

```bash
python -m unittest discover tests -v
```

## 配置说明

游戏配置存储在 `config/game_config.json` 中，可以调整：
- 玩家初始属性
- 敌人属性和生成规则
- 物品效果
- 地牢生成参数
- 响应式布局参数

## 开发

### 技术栈
- Python 3.6+
- 模块化设计
- 单元测试覆盖核心逻辑
- 日志记录系统

### 响应式设计
游戏界面会根据终端窗口大小自动调整：
- 摄像机跟随玩家位置
- 状态栏和消息日志高度自适应
- 最小支持 60x20 终端

## 日志

游戏日志记录到 `game.log` 文件，包含：
- 游戏开始/结束
- 战斗事件
- 错误信息

## 版本

当前版本：V1.0 (MVP)

## 许可

本项目仅供学习和娱乐使用。

## 作者

iFlow CLI

---

祝你在地牢中冒险愉快！